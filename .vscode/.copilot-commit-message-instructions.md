---
description: Commit Message Instructions
---

# Commit Message Instructions

## Scope & Metadata

- **Last Updated**: 2025-08-10
- **Precedence**: Highest in this repository
- **Compatibility**: [git compatible](https://git-scm.com/docs/git-commit)
- **Style Base**: [Conventional Commits](https://www.conventionalcommits.org/)
- **Goal**: Write clear, consistent Conventional Commits for automated SemVer, changelog generation, and release pipelines.

## Commit Practices & Style

- **CM-001 (MUST) Message format**

  - Use `type[:scope]: subject` (Conventional Commits).
  - Subject: **imperative**, **≤ 72 chars**, **no trailing period**.
  - Use `!` for breaking changes and add a `BREAKING CHANGE:` footer.
  - Common `type`: `feat|fix|refactor|perf|docs|test|ci|build|chore|style|revert`.
  - **Examples**
    - `feat: add metrics lookup by ID`
    - `fix/client: handle 404 correctly`
    - `refactor/scripts: simplify bootstrap`
    - `docs/api: update endpoint reference`
    - `feat/core!: remove deprecated methods`

- **CM-002 (MUST) Atomic, meaningful commits**

  - Group related changes; split unrelated changes into separate commits.
  - Keep each commit independently reviewable and revertable.

  **Good**

  - `feat/api: add GET /items with status filter`
  - `fix/http: treat 404 as error; add unit tests`

  **Bad**

  - `feat: refactor modules and update tests and docs` (mixed concerns)

  **Example split for a large change (reorg + logging + tests)**

  1. `chore/modules: move & rename packages; no behavior change`
     – pure file moves/renames
  2. `refactor/core: extract common utilities`
     – create `internal/core/{ops,utils}.go`; update call sites
  3. `feat/logging: add centralized logger & color helpers`
     – introduce `pkg/log` and helpers
  4. `refactor/logging: migrate components to new logger`
     – replace ad-hoc prints; no logic change
  5. `fix/logging: adjust default level for non-TTY`
  6. `feat/test: add --coverage to runners; write to ./tmp`
  7. `chore/test: unify coverage helper function`
  8. `ci: publish coverage artifacts`
  9. `style/naming: align function names (no behavior change)`
  10. `docs: add logging and migration notes`

- **CM-003 (SHOULD) Commit body & footers**

  - Use the body for **context, rationale, and impact**; wrap at ~72 cols.
  - Reference issues/PRs: `Refs #123`, `Fixes #456`.
  - Footers: `BREAKING CHANGE: ...`, `Co-authored-by: Name <email>` as needed.

- **CM-004 (SHOULD) Scopes**

  - Prefer stable, meaningful scopes such as `api`, `core`, `cli`, `client`, `server`, `db`, `docs`, `build`, `ci`, `deps`, `scripts`, `ui`.
  - If multiple areas changed, **split commits** instead of using multiple scopes.

- **CM-005 (SHOULD) Respect .gitignore**

  - Do not commit artifacts or temporaries: `./tmp/`, `.copilot_reports/`, build outputs, coverage files, editor caches.

- **CM-006 (MUST NOT) Prohibited commits**
  - Avoid `wip`, “misc fixes”, or squash-everything messages.
  - Use `revert: <subject>` with a body including the original SHA when reverting.
